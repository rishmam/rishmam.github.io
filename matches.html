
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Matches</title>
  <!-- add bootstrap css file -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/main.css">
  
</head>
<!-- TODO: When releasing matches, update onload to matchLoad()-->
<body id="get-big">
	<!-- navbar -->
  <nav class="navbar navbar-expand-lg fixed-top ">
    <a class="navbar-brand" href="./homepage.html">
      <img src="/images/start_logo.png" width="40" height="40" alt="">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="./homepage.html">
      <ul class="navbar-nav mr-4">
        <li class="nav-item">
          <div class="start">
            <button class="button4" id="demo" onclick="window.location.href = 'https://nehana.github.io/login.html';"></button>
            <script>
            var countDownDate = new Date("Feb 10, 2020 23:59:59").getTime();
            var x = setInterval(function() {
            var now = new Date().getTime();
            var distance = countDownDate - now;
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            if (days < 10) {
              days = "0" + days;
            }
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            if (hours < 10) {
              hours = "0" + hours;
            }
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            if (minutes < 10) {
              minutes = "0" + minutes;
            }
            var seconds = Math.floor((distance % (1000 * 60)) / (1000));
            if (seconds < 10) {
              seconds = "0" + seconds;
            }
            document.getElementById("demo").innerHTML = days + " : " + hours + " : "
            + minutes + " : " + seconds;
            if (distance < 0) {
              clearInterval(x);
              document.getElementById("demo").innerHTML = "Happy Valentine's Day!!";
            }
            }, 1000);
            </script>
          </div>
        </li>
      </ul>
    </a>
    <div class="collapse navbar-collapse " id="navbarSupportedContent">
      <ul class="navbar-nav mr-4">
          <li class="nav-item">
            <a class="nav-link" href="./about2.html">ABOUT</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./team.html">TEAM</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./faq2.html">FAQ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="login" href="./login.html">LOGIN</a>
          </li>
      </ul>
      <script>
        const checkAuth = async() => {
          console.log(sessionStorage.email);
          if(sessionStorage.email == undefined) {
            console.log("user not logged in");
            var element = document.getElementById("login");
            element.innerHTML = "LOGIN";
            element.setAttribute('href', './login.html');
            return;
          } else { 
            console.log("user logged in");
            var element = document.getElementById("login");
            element.innerHTML = "LOG OUT";
            element.setAttribute('href', './logoutConfirmation.html');
            return;
          }
        }
        function signOut() {
          gapi.auth2.getAuthInstance().signOut().then(function() {
            console.log('user signed out');
            var element = document.getElementById("login");
            element.innerHTML = "LOGIN";
            element.setAttribute('href', './login.html');
            sessionStorage.clear();
            window.location.replace("https://nehana.github.io/logoutConfirmation.html");
            return;
          })
        }
      </script>
    </div>
  </nav>
  <div class="c">
    <h1>Matching in progress...</h1>
    <h1>ðŸ”Ž</h1>
    <h4>In the meantime, check out our FAQ for questions, browse through the BearPairs perks in the About section, contact us for unaddressed questions or issues, and keep being awesome. Go Bears!</h4>
  </div>
    <!-- 
      <div class="c">
      <h1>Your matches have arrived.</h1>
      <div class="loader" id="loading-image"></div>
    </div> 
    <div class="a" >
        <div id="match-picture-0" class="avatar" onClick="seeMatch0()"> </div>
        <div id="match-picture-1" class="avatar" onClick="seeMatch1()"> </div>
        <div id="match-picture-2" class="avatar" onClick="seeMatch2()"> </div>
    </div>
    -->

    <br>
    <!--
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
          apiKey: "AIzaSyCvpEisytGcXdAqjyxrWiDrAvqy86Bi6Dk",
          authDomain: "bearp-493dc.firebaseapp.com",
          databaseURL: "https://bearp-493dc.firebaseio.com",
          projectId: "bearp-493dc",
          storageBucket: "bearp-493dc.appspot.com",
          messagingSenderId: "714702346867"
      }
      firebase.initializeApp(config);
    </script>
    <script>
      const matchLoad = async() => {
        console.log("test");
        const userEmail = sessionStorage.email;
        const db = firebase.firestore();

        const users = db.collection('users');
            const res = await getMatches();
            const matchPic = document.querySelector("#match-picture");
            const matchName = document.querySelector("#match-name");
            const matchTweet = document.querySelector("#match-tweet");
            for (var x in res) {
              var id = "match-picture-" + x;
              console.log(id);
              //document.getElementById(id).src = res[x].picture;
              document.getElementById(id).style = "background-image: url('" + res[x].picture + "');";
            }
            if (res.length == 1) {
              var element = document.getElementById("match-picture-2");
              element.parentNode.removeChild(element);
              element = document.getElementById("match-picture-1");
              element.parentNode.removeChild(element);
            } else if (res.length == 2) {
              var element = document.getElementById("match-picture-2");
              element.parentNode.removeChild(element);
            }
            var element = document.getElementById("loading-image");
            element.parentNode.removeChild(element);
        };

        const getMatches = async () => {
            const userEmail = sessionStorage.email;
            const db = firebase.firestore();
            const users = db.collection('users');
            const querySnapshot = await users.get();
            const docSnapshots = querySnapshot.docs;
            let list = [];
            for (var i in docSnapshots) {
              for (var j in docSnapshots[i].data().matchEmails) {
                if (docSnapshots[i].data().matchEmails[j] == (sessionStorage.email))) {
                  console.log(docSnapshots[i].data().name);
                  list.push({email: docSnapshots[i].data().email, name: docSnapshots[i].data().name, picture: docSnapshots[i].data().picture, tweet: docSnapshots[i].data().tweet});
                }
              }
            }
            return list;
        }

        const seeMatch0 = async () => {
          sessionStorage.matchView = 0;
          window.location.replace("http://localhost:5500/matchView.html");
        }
        const seeMatch1 = async () => {
          sessionStorage.matchView = 1;
          window.location.replace("http://localhost:5500/matchView.html");
        }
        const seeMatch2 = async () => {
          sessionStorage.matchView = 2;
          window.location.replace("http://localhost:5500/matchView.html");
        }
    </script>
    <script language="javascript" type="text/javascript">
     $(window).load(function() {
     
  });
</script> -->
</body> 
</html>