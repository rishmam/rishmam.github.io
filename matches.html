
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Matches</title>
  <!-- add bootstrap css file -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/main.css">
  
</head>

<body id="get-big" onload="matchLoad()">
   <!-- navbar -->
  <nav class="navbar navbar-expand-lg fixed-top "> </nav>
  <div class="c">
    <h1>Matching in progress...</h1>
    <h1>ðŸ”Ž</h1>
    <h4>In the meantime, check out our FAQ for questions, browse through the BearPairs perks in the About section, contact us for unaddressed questions or issues, and keep being awesome. Go Bears!</h4>
  </div>
    <!--
    <div class="c">
      <h1>Your matches have arrived.</h1>
      <div class="loader" id="loading-image"></div>
    </div>
    <div class="a" >
        <div id="match-picture-0" class="avatar" onClick="seeMatch0()">  </div>
        <div id="match-picture-1" class="avatar" onClick="seeMatch1()"> </div>
        <div id="match-picture-2" class="avatar" onClick="seeMatch2()"> </div>
    </div>
    -->

    <br>
    <!--
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
          apiKey: "AIzaSyCvpEisytGcXdAqjyxrWiDrAvqy86Bi6Dk",
          authDomain: "bearp-493dc.firebaseapp.com",
          databaseURL: "https://bearp-493dc.firebaseio.com",
          projectId: "bearp-493dc",
          storageBucket: "bearp-493dc.appspot.com",
          messagingSenderId: "714702346867"
      }
      firebase.initializeApp(config);
    </script>
    <script>
      const matchLoad = async() => {
        console.log("test");
        const userEmail = sessionStorage.email;
        const db = firebase.firestore();

        const users = db.collection('users');
            const res = await getMatches();
            console.log(res);
            const matchPic = document.querySelector("#match-picture");
            const matchName = document.querySelector("#match-name");
            const matchTweet = document.querySelector("#match-tweet");
            for (var x in res) {
              var id = "match-picture-" + x;
              console.log(id);
              //document.getElementById(id).src = res[x].picture;
              document.getElementById(id).style = "background-image: url('" + res[x].picture + "');";
            }
            if (res.length == 1) {
              var element = document.getElementById("match-picture-2");
              element.parentNode.removeChild(element);
              element = document.getElementById("match-picture-1");
              element.parentNode.removeChild(element);
            } else if (res.length == 2) {
              var element = document.getElementById("match-picture-2");
              element.parentNode.removeChild(element);
            }
            var element = document.getElementById("loading-image");
            element.parentNode.removeChild(element);
        };

        const getMatches = async () => {
            const userEmail = sessionStorage.email;
            const db = firebase.firestore();
            const users = db.collection('users');
            const querySnapshot = await users.get();
            const docSnapshots = querySnapshot.docs;
            let list = [];
            for (var i in docSnapshots) {
              for (var j in docSnapshots[i].data().matchEmails) {
                if (docSnapshots[i].data().matchEmails[j] == (sessionStorage.email))) {
                  console.log(docSnapshots[i].data().name);
                  list.push({email: docSnapshots[i].data().email, name: docSnapshots[i].data().name, picture: docSnapshots[i].data().picture, tweet: docSnapshots[i].data().tweet});
                }
              }
            }
            return list;
        }

        const seeMatch0 = async () => {
          sessionStorage.matchView = 0;
          window.location.replace("http://localhost:5500/matchView.html");
        }
        const seeMatch1 = async () => {
          sessionStorage.matchView = 1;
          window.location.replace("http://localhost:5500/matchView.html");
        }
        const seeMatch2 = async () => {
          sessionStorage.matchView = 2;
          window.location.replace("http://localhost:5500/matchView.html");
        }
    </script>
    <script language="javascript" type="text/javascript">
     $(window).load(function() {
     
  });
</script> -->
</body> 
</html>